@page
@model EnableAuthenticatorModel
@{
    ViewData["Title"] = "Thiết lập ứng dụng xác thực";
    ViewData["ActivePage"] = ManageNavPages.TwoFactorAuthentication;
}

<partial name="_StatusMessage" for="StatusMessage" />
<h3>@ViewData["Title"]</h3>
<div>
    <p>Để sử dụng ứng dụng xác thực, hãy thực hiện các bước sau:</p>
    <ol class="list">
        <li>
            <p>
                Tải xuống ứng dụng xác thực hai yếu tố như
                <a href="https://play.google.com/store/apps/details?id=com.nkduy.authenticator">Kdu Authenticator</a>
                (tạo bởi <a href="https://github.com/khanhduy1407">NKDuy</a> và <b>khuyến khích sử dụng</b> vì bảo mật nâng cao) cho Android
                hoặc Google Authenticator cho
                <a href="https://play.google.com/store/apps/details?id=com.google.android.apps.authenticator2&amp;hl=en">Android</a> và
                <a href="https://itunes.apple.com/us/app/google-authenticator/id388497605?mt=8">iOS</a>.
            </p>
        </li>
        <li>
            <p>Quét mã QR hoặc nhập khóa này <kbd>@Model.SharedKey</kbd> vào ứng dụng xác thực 2 yếu tố của bạn. Khoảng cách và hoa thường không quan trọng.</p>
            <div id="qrCode"></div>
            <div id="qrCodeData" data-url="@Model.AuthenticatorUri"></div>
        </li>
        <li>
            <p>
                Sau khi bạn quét mã QR hoặc nhập khóa ở trên, ứng dụng xác thực 2 yếu tố sẽ cung cấp cho bạn
                một mã duy nhất. Nhập mã vào ô xác nhận bên dưới.
            </p>
            <form id="send-code" method="post" class="ui large form">
                <div class="field">
                    <label asp-for="Input.Code">Mã xác thực</label>
                    <input asp-for="Input.Code" autocomplete="off" placeholder="123456" />
                    <span asp-validation-for="Input.Code" class="text-danger"></span>
                </div>
                <button type="submit" class="fluid ui large primary button">Xác thực</button>
                <div asp-validation-summary="ModelOnly" class="text-danger" role="alert"></div>
            </form>
        </li>
    </ol>
</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />

    <script src="~/lib/qrcodejs/qrcode.js"></script>
    <script type="text/javascript">
      new QRCode(document.getElementById("qrCode"), {
        text: "@Html.Raw(Model.AuthenticatorUri)",
        width: 200,
        height: 200
      });
    </script>
}
